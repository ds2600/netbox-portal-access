<div class="card">
  <h5 class="card-header">Credentials / Adapter</h5>
  <div class="card-body">
    <dl class="row mb-0">
      <dt class="col-5">Adapter</dt>
      <dd class="col-7">{{ portal.adapter|default:"—" }}</dd>

      <dt class="col-5">Base URL</dt>
      <dd class="col-7">{{ portal.base_url|default:"—" }}</dd>

      <dt class="col-5">Last Test</dt>
      <dd class="col-7">
        {% if cred and cred.last_test_at %}
          {% if cred.last_test_status == "OK" %}
            <span class="badge bg-success">OK</span>
          {% else %}
            <span class="badge bg-danger">{{ cred.last_test_status|default:"FAILED" }}</span>
          {% endif %}
          <span class="text-muted">{{ cred.last_test_at }}</span>
        {% else %}
          <span class="text-muted">Never</span>
        {% endif %}
      </dd>
    </dl>
  </div>
  <div class="card-footer text-end">
    {% if perms.netbox_portal_access.change_portalcredential %}
      <a href="{% url 'plugins:netbox_portal_access:portal_credentials_edit' portal.pk %}" class="btn btn-sm btn-primary">Edit</a>
    {% endif %}
    {% if portal.adapter and perms.netbox_portal_access.can_sync_vendor %}
      <a href="{% url 'plugins:netbox_portal_access:portal_credentials_test' portal.pk %}" class="btn btn-sm btn-outline-secondary">Test</a>
    {% else %}
      <button class="btn btn-sm btn-outline-secondary" disabled>Test</button>
    {% endif %}
  </div>
</div>

