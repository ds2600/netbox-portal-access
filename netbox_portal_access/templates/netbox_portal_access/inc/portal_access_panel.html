<div class="card">
  <h5 class="card-header">Portal Access</h5>
  <div class="card-body">
    {% if assignments %}
      <table class="table table-hover table-sm">
        <thead>
          <tr>
            <th>Portal</th>
            <th>User</th>
            <th>Role</th>
            <th>Category</th>
            <th>Active</th>
            <th>Last Verified</th>
            <th>Expires</th>
          </tr>
        </thead>
        <tbody>
          {% for a in assignments %}
            <tr>
              <td><a href="{% url 'plugins:netbox_portal_access:portal' pk=a.portal.pk %}">{{ a.portal.name }}</a></td>
              <td>
                {% if a.user %}
                  <a href="{% url 'users:user' pk=a.user.pk %}">{{ a.user.username }}</a>
                {% elif a.contact %}
                  {{ a.contact }}
                {% else %}
                  —
                {% endif %}
              </td>
              <td>{{ a.role.name }}</td>
              <td>{{ a.role.get_category_display }}</td>
              <td>{% if a.active %}✔{% else %}✖{% endif %}</td>
              <td>{{ a.last_verified|date:"Y-m-d" }}</td>
              <td>{{ a.expires_on|date:"Y-m-d" }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p class="text-muted mb-0">No portal access assignments found.</p>
    {% endif %}
  </div>
</div>

